<ng-container>
    <div class="container mt-5 mb-3">
        <div class="row">
            <div class="col-12">
                <a class="float-end" [routerLink]="['create']" nbButton status="primary" size="tiny">
                    <nb-icon icon="plus-outline"></nb-icon>
                    {{ 'app.product.new' | translate }}</a>
            </div>
        </div>
        <div class="col-12 mt-4">
            <nb-card class="p-4" accent="primary" [nbSpinner]="loading" nbSpinnerStatus="primary">
                <div class="row">
                    <div class="col-md-6">
                        <app-item-per-page (onPageSizeChange)="pageSizeChange($event)"></app-item-per-page>
                    </div>
                    <div class="col-md-6">
                        <app-searchbox (onItemSearch)="search($event)"></app-searchbox>
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col-12">
                        <table class="table table-striped table-borderless">
                            <thead>
                                <th class="col-6" scope="col" sortable="name" (sort)="onSort($event)" >{{'app.common.products' | translate }}</th>
                                <th class="col-2" scope="col" sortable="price" (sort)="onSort($event)" >{{'app.product.price' | translate }}</th>
                                <th class="col-2" scope="col" sortable="status" (sort)="onSort($event)" >{{'app.product.status' | translate }}</th>
                                <th class="col-2" scope="col">
                                    <span class="float-end">{{'app.table.actions' | translate }}</span>
                                </th>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let item of response?.results">
                                    <tr>
                                        <td>
                                            <!-- Use to highlight text based on seachTerm when user is searching for product in the searchbox-->
                                            <ngb-highlight [result]="item.name" [term]="searchTerm"></ngb-highlight>
                                        </td>
                                        <td>
                                            {{item.price}}
                                        </td>
                                        <td>
                                            <span class="badge badge-{{setBadgeStatus(item.status!)}}">{{item.status}}</span>
                                        </td>
                                        <td>
                                            <nb-icon 
                                                class="float-end"
                                                status="basic" 
                                                icon="more-horizontal-outline" 
                                                [nbContextMenu]="actions"></nb-icon>
                                        </td>
                                    </tr>
                                </ng-container>
                            </tbody>
                        </table>
                        <div class="row mt-3">
                            <div class="col-12">
                                <ngb-pagination
                                    class="float-end"
                                    (pageChange)="onPageChange($event)"
                                    [ellipses]="true"
                                    [boundaryLinks]="true"
                                    [(page)]="pagination.page"
                                    [pageSize]="pagination.pageSize"
                                    [collectionSize]="response?.records!"
                                ></ngb-pagination>
                            </div>
                        </div>
                    </div>
                </div>
            </nb-card>
        </div>
    </div>
</ng-container>